<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ú–µ–Ω—é —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f2f2f2;
      padding: 20px;
    }
    h1, h2 {
      text-align: center;
    }
    .menu, .cart {
      max-width: 700px;
      margin: 20px auto;
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .category {
      cursor: pointer;
      background: #4caf50;
      color: white;
      padding: 10px;
      border-radius: 5px;
      margin-bottom: 10px;
    }
    .subcategory {
      display: none;
      margin-top: 10px;
    }
    .item {
      display: flex;
      justify-content: space-between;
      margin: 8px 0;
    }
    button {
      background: #4caf50;
      border: none;
      color: white;
      padding: 6px 10px;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background: #45a049;
    }
    .cart-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      align-items: center;
    }
    .cart-item button {
      background: #f44336;
      margin-left: 10px;
    }
    .cart-item button:hover {
      background: #d32f2f;
    }
    .summary {
      margin-top: 20px;
      font-weight: bold;
      text-align: right;
    }
    .print-button, .clear-button {
      margin-top: 20px;
      display: inline-block;
      background: #2196f3;
      padding: 10px 15px;
      border-radius: 5px;
      color: white;
      font-size: 16px;
      border: none;
      cursor: pointer;
    }
    .print-button:hover {
      background: #1976d2;
    }
    .clear-button {
      background: #f44336;
      margin-left: 10px;
    }
    .clear-button:hover {
      background: #d32f2f;
    }
    .time-input {
      margin: 5px 0 15px 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }
  </style>
</head>
<body>

<h1>–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–µ –ú–µ–Ω—é</h1>

<div class="menu">
  <div class="category" onclick="toggleCategory('salads')">ü•ó –°–∞–ª–∞—Ç—ã</div>
  <div id="salads" class="subcategory">
    <div class="item"><span>–°–∞–ª–∞—Ç –∏–∑ —Å–≤–µ–∂–∏—Ö –æ–≤–æ—â–µ–π</span><button onclick="addToCart('–°–∞–ª–∞—Ç –∏–∑ —Å–≤–µ–∂–∏—Ö –æ–≤–æ—â–µ–π', 2990, '–°–∞–ª–∞—Ç—ã')">–î–æ–±–∞–≤–∏—Ç—å ‚Äî 2990 —Ç–≥</button></div>
    <div class="item"><span>–°–∞–ª–∞—Ç –ö–æ—Å—Ç—É—Ä–∞</span><button onclick="addToCart('–°–∞–ª–∞—Ç –ö–æ—Å—Ç—É—Ä–∞', 4990, '–°–∞–ª–∞—Ç—ã')">–î–æ–±–∞–≤–∏—Ç—å ‚Äî 4990 —Ç–≥</button></div>
    <div class="item"><span>–°–∞–ª–∞—Ç –°–∞–Ω–¥—ã–∫</span><button onclick="addToCart('–°–∞–ª–∞—Ç –°–∞–Ω–¥—ã–∫', 4990, '–°–∞–ª–∞—Ç—ã')">–î–æ–±–∞–≤–∏—Ç—å ‚Äî 4990 —Ç–≥</button></div>
    <div class="item"><span>–°–∞–ª–∞—Ç –•—Ä—É—Å—Ç –±–∞–∫–ª–∞–∂–∞–Ω—ã</span><button onclick="addToCart('–°–∞–ª–∞—Ç –•—Ä—É—Å—Ç –±–∞–∫–ª–∞–∂–∞–Ω—ã', 3990, '–°–∞–ª–∞—Ç—ã')">–î–æ–±–∞–≤–∏—Ç—å ‚Äî 3990 —Ç–≥</button></div>
    <div class="item"><span>–°–∞–ª–∞—Ç –∏–∑ —Å–µ–∑–æ–Ω–Ω—ã—Ö –æ–≤–æ—â–µ–π</span><button onclick="addToCart('–°–∞–ª–∞—Ç –∏–∑ —Å–µ–∑–æ–Ω–Ω—ã—Ö –æ–≤–æ—â–µ–π', 4990, '–°–∞–ª–∞—Ç—ã')">–î–æ–±–∞–≤–∏—Ç—å ‚Äî 4990 —Ç–≥</button></div>
  </div>

  <div class="category" onclick="toggleCategory('main')">üçΩÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –±–ª—é–¥–∞</div>
  <div id="main" class="subcategory">
    <div class="item"><span>–ë–µ—à–±–∞—Ä–º–∞–∫</span><button onclick="addToCart('–ë–µ—à–±–∞—Ä–º–∞–∫', 7990, '–ì–æ—Ä—è—á–∏–µ –±–ª—é–¥–∞')">–î–æ–±–∞–≤–∏—Ç—å ‚Äî 7990 —Ç–≥</button></div>
    <div class="item"><span>–ë–æ—Ä—à–∞ –µ—Ç</span><button onclick="addToCart('–ë–æ—Ä—à–∞ –µ—Ç', 7990, '–ì–æ—Ä—è—á–∏–µ –±–ª—é–¥–∞')">–î–æ–±–∞–≤–∏—Ç—å ‚Äî 7990 —Ç–≥</button></div>
    <div class="item"><span>–ë–∞–ª –∫—É—ã—Ä–¥–∞–∫</span><button onclick="addToCart('–ë–∞–ª –∫—É—ã—Ä–¥–∞–∫', 6990, '–ì–æ—Ä—è—á–∏–µ –±–ª—é–¥–∞')">–î–æ–±–∞–≤–∏—Ç—å ‚Äî 6990 —Ç–≥</button></div>
    <div class="item"><span>–®–∏ –∫—É—ã—Ä–¥–∞–∫</span><button onclick="addToCart('–®–∏ –∫—É—ã—Ä–¥–∞–∫', 6990, '–ì–æ—Ä—è—á–∏–µ –±–ª—é–¥–∞')">–î–æ–±–∞–≤–∏—Ç—å ‚Äî 6990 —Ç–≥</button></div>
    <div class="item"><span>–ë—É–∫–ø–∞</span><button onclick="addToCart('–ë—É–∫–ø–∞', 7990, '–ì–æ—Ä—è—á–∏–µ –±–ª—é–¥–∞')">–î–æ–±–∞–≤–∏—Ç—å ‚Äî 7990 —Ç–≥</button></div>
    <div class="item"><span>–ö—ã–º—ã–∑ –ö–∞–±—ã—Ä–≥–∞</span><button onclick="addToCart('–ö—ã–º—ã–∑ –ö–∞–±—ã—Ä–≥–∞', 7990, '–ì–æ—Ä—è—á–∏–µ –±–ª—é–¥–∞')">–î–æ–±–∞–≤–∏—Ç—å ‚Äî 7990 —Ç–≥</button></div>
    <div class="item"><span>–ú–æ–π—ã–Ω –®–æ—É</span><button onclick="addToCart('–ú–æ–π—ã–Ω –®–æ—É', 25990, '–ì–æ—Ä—è—á–∏–µ –±–ª—é–¥–∞')">–î–æ–±–∞–≤–∏—Ç—å ‚Äî 25990 —Ç–≥</button></div>
    <div class="item"><span>–ö–∞–∫—Ç–∞–ª–≥–∞–Ω –∫–∞–∑—ã</span><button onclick="addToCart('–ö–∞–∫—Ç–∞–ª–≥–∞–Ω –∫–∞–∑—ã', 7990, '–ì–æ—Ä—è—á–∏–µ –±–ª—é–¥–∞')">–î–æ–±–∞–≤–∏—Ç—å ‚Äî 7990 —Ç–≥</button></div>
    <div class="item"><span>–ì–æ—Ä–Ω–∞—è —Ñ–æ—Ä–µ–ª—å</span><button onclick="addToCart('–ì–æ—Ä–Ω–∞—è —Ñ–æ—Ä–µ–ª—å', 6590, '–ì–æ—Ä—è—á–∏–µ –±–ª—é–¥–∞')">–î–æ–±–∞–≤–∏—Ç—å ‚Äî 6590 —Ç–≥</button></div>
    <div class="item"><span>–ù–∞–Ω —Å–∞–ª–º–∞</span><button onclick="addToCart('–ù–∞–Ω —Å–∞–ª–º–∞', 5990, '–ì–æ—Ä—è—á–∏–µ –±–ª—é–¥–∞')">–î–æ–±–∞–≤–∏—Ç—å ‚Äî 5990 —Ç–≥</button></div>
  </div>
</div>

<div class="cart">
  <h2>üßæ –í–∞—à –∑–∞–∫–∞–∑</h2>
  <div id="cart-items"></div>
  <div class="summary" id="summary"></div>
  <button class="print-button" onclick="printReceipt()">–†–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å –∑–∞–∫–∞–∑</button>
  <button class="clear-button" onclick="clearCart()">–û—á–∏—Å—Ç–∏—Ç—å –∑–∞–∫–∞–∑</button>
</div>

<script>
  let cart = [];
  const servicePercent = 0.15;
  let categoryTimes = {};

  function toggleCategory(id) {
    const el = document.getElementById(id);
    el.style.display = el.style.display === 'block' ? 'none' : 'block';
  }

  function addToCart(name, price, category) {
    cart.push({ name, price, category });
    updateCart();
  }

  function removeFromCart(index) {
    cart.splice(index, 1);
    updateCart();
  }

  function clearCart() {
    cart = [];
    categoryTimes = {};
    updateCart();
  }

  function updateCart() {
    const cartItems = document.getElementById('cart-items');
    const summary = document.getElementById('summary');
    cartItems.innerHTML = "";

    if (cart.length === 0) {
      cartItems.textContent = "–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞";
      summary.textContent = "";
      return;
    }

    let grouped = {};
    cart.forEach((item, index) => {
      if (!grouped[item.category]) {
        grouped[item.category] = [];
      }
      grouped[item.category].push({ ...item, index });
    });

    let total = 0;

    for (const category in grouped) {
      const categoryTitle = document.createElement('h3');
      categoryTitle.textContent = `üïí –ü–æ–¥–∞—á–∞: ${category}`;

      const timeInput = document.createElement('div');
      timeInput.className = "time-input";
      timeInput.innerHTML = `
        <label>–í—Ä–µ–º—è –ø–æ–¥–∞—á–∏:</label>
        <input type="time" value="${categoryTimes[category] || ''}" onchange="categoryTimes['${category}'] = this.value" />
      `;

      cartItems.appendChild(categoryTitle);
      cartItems.appendChild(timeInput);

      grouped[category].forEach(({ name, price, index }) => {
        const div = document.createElement('div');
        div.className = "cart-item";

        const itemName = document.createElement('span');
        itemName.textContent = `${name} ‚Äî ${price} —Ç–≥`;
        div.appendChild(itemName);

        const delBtn = document.createElement('button');
        delBtn.textContent = '–£–¥–∞–ª–∏—Ç—å';
        delBtn.onclick = () => removeFromCart(index);
        div.appendChild(delBtn);

        cartItems.appendChild(div);
        total += price;
      });
    }

    const service = total * servicePercent;
    const finalTotal = total + service;

    summary.innerHTML = `
      –°—É–º–º–∞ –∑–∞–∫–∞–∑–∞: ${total.toFixed(0)} —Ç–≥<br>
      –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ (15%): ${service.toFixed(0)} —Ç–≥<br>
      <strong>–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ: ${finalTotal.toFixed(0)} —Ç–≥</strong>
    `;
  }

  function printReceipt() {
    const printWindow = window.open('', '', 'width=800,height=600');
    let html = '<html><head><title>–ß–µ–∫ –∑–∞–∫–∞–∑–∞</title>';
    html += '<style>body { font-family: Arial; padding: 20px } table { width: 100%; border-collapse: collapse; margin-top: 20px } th, td { border: 1px solid #000; padding: 8px } th { background: #f2f2f2 }</style>';
    html += '</head><body>';
    html += '<h2 style="text-align:center">–†–µ—Å—Ç–æ—Ä–∞–Ω SANDYQ ‚Äî –∑–∞–∫–∞–∑</h2>';
    html += '<table><thead><tr><th>–ë–ª—é–¥–æ</th><th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th><th>–¶–µ–Ω–∞</th></tr></thead><tbody>';
    cart.forEach(item => {
      html += `<tr><td>${item.name}</td><td>${item.category}</td><td>${item.price} —Ç–≥</td></tr>`;
    });
    html += '</tbody></table>';

    html += '<p style="margin-top:20px">–°—É–º–º–∞ –∑–∞–∫–∞–∑–∞: ' + cart.reduce((sum, i) => sum + i.price, 0) + ' —Ç–≥</p>';
    html += '<p>–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ (15%): ' + (cart.reduce((sum, i) => sum + i.price, 0) * 0.15).toFixed(0) + ' —Ç–≥</p>';
    html += '<p><strong>–ò—Ç–æ–≥–æ: ' + (cart.reduce((sum, i) => sum + i.price, 0) * 1.15).toFixed(0) + ' —Ç–≥</strong></p>';
    html += '<p style="margin-top:40px">–ü–æ–¥–ø–∏—Å—å –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–∞: __________________</p>';
    html += '<p>–ü–æ–¥–ø–∏—Å—å –≥–æ—Å—Ç—è: __________________</p>';
    html += '</body></html>';
    printWindow.document.write(html);
    printWindow.document.close();
    printWindow.print();
  }
</script>

</body>
</html>
